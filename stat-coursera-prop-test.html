<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: 데이터 과학 – 기초 통계</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">데이터 과학 – 기초 통계</h1></a>
          <h2 class="subtitle">단일 표본 비율검정 – 웹사이트 선호도 분석</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="학습-목표"><span class="glyphicon glyphicon-certificate"></span>학습 목표</h2>
</div>
<div class="panel-body">
<ul>
<li>사용자 선호도 비율을 검정한다.</li>
<li>단일 표본 비율 검정을 수행한다.</li>
<li>단일 표본 수준이 3개 이상인 경우 비율 검정을 수행한다.</li>
</ul>
</div>
</section>
<h3 id="비율-검정">1. 비율 검정</h3>
<table>
<thead>
<tr class="header">
<th align="left">표본</th>
<th align="left">반응 범주</th>
<th align="left">검정</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">2</td>
<td align="left">단일 표본 <span class="math inline">\(\chi^2\)</span> 검정, 이항 검정(Binomial Test)</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">2 이상</td>
<td align="left">단일 표본 <span class="math inline">\(\chi^2\)</span> 검정, 다항 검정(multinomial Test)</td>
</tr>
<tr class="odd">
<td align="left">1이상</td>
<td align="left">2 이상</td>
<td align="left"><span class="math inline">\(N\)</span> 표본 <span class="math inline">\(\chi^2\)</span> 검정, G-검정, 피셔의 정확검정</td>
</tr>
</tbody>
</table>
<h4 id="단일-표본-비율검정-웹사이트-ab-선호도-분석">1.1 단일 표본 비율검정 – 웹사이트 A,B 선호도 분석</h4>
<p>웹사이트 두개를 개발해 두고, 사용자에게 A 웹사이트와 B 웹사이트에 대한 선호도를 조사한다. 통상 A 웹사이트는 기존 웹사이트가 되고, B 웹사이트는 새로운 UI, 기능이 추가된 웹사이트다.</p>
<p>데이터는 <a href="http://depts.washington.edu/aimgroup/proj/ps4hci/">Practical Statistics for HCI</a> 사이트에 공개된 SPSS 파일을 R로 불러와서 실험 검증에 사용한다.</p>
<pre class="{r}"><code>##==============================================================================
## 01. 데이터 가져오기
##==============================================================================
library(haven)
spss.dat &lt;- file.choose()
pref.df &lt;- read_spss(spss.dat)

head(pref.df)</code></pre>
<pre class="output"><code>Source: local data frame [6 x 2]

  Subject Preference
    (dbl)     (lbll)
1       1          1
2       2          2
3       3          2
4       4          1
5       5          1
6       6          1</code></pre>
<p>웹선호도에 대한 코딩이 <code>1</code>, <code>2</code>로 되어 있다. 이를 <code>A</code>, <code>B</code> 로 코딩을 바꾼다.</p>
<pre class="{r}"><code>##==============================================================================
## 02. 데이터 전처리 및 정제
##==============================================================================
library(dplyr)
library(plyr)

pref.df$Subject &lt;- sapply(pref.df$Subject, as.factor)
pref.df$Preference &lt;- sapply(pref.df$Preference, as.factor)

pref.df &lt;- pref.df %&gt;% mutate(Preference = revalue(Preference, c(&#39;1&#39;=&#39;A&#39;, &#39;2&#39;=&#39;B&#39;)))</code></pre>
<pre class="{r}"><code>##==============================================================================
## 03. 실험설계 통계분석
##==============================================================================
# 3.1. 기초 통계 및 시각화
summary(pref.df)
plot(pref.df$Preference)</code></pre>
<pre class="output"><code>    Subject   Preference
 1      : 1   A:21      
 2      : 1   B: 9      
 3      : 1             
 4      : 1             
 5      : 1             
 6      : 1             
 (Other):24      </code></pre>
<pre class="{r}"><code>#-------------------------------------------------------------------------------
# 3.2 실험설계 단일표본 비율검정: One-Sample Proportion Test
#-------------------------------------------------------------------------------
# 근사 카이스퀘어 검정
prefs &lt;- xtabs( ~ Preference, data=pref.df)
prefs
chisq.test(prefs)</code></pre>
<p><span class="math inline">\(p-\)</span>값 0.05를 기준으로 본다면, 웹사이트 A와 B 선호도에 유의성이 있다는 결론에 도달하게 된다.</p>
<pre class="output"><code>    Chi-squared test for given probabilities

data:  prefs
X-squared = 4.8, df = 1, p-value = 0.02846</code></pre>
<pre class="{r}"><code># 정확 이항 검정 (Exact Binomial Test)
binom.test(prefs)</code></pre>
<p><span class="math inline">\(\chi^2\)</span> 검정은 표본수가 많아지게 되면 정확도가 높아지는 근사검정이지만 정확 이항 검정(Exact Binomial Test)은 컴퓨팅 계산에 부담이 되지만, 근사 검정이 아니고 정확 검정이다. 귀무가설 웹사이트 A와 B의 선호도가 같다는 95% 신뢰구간에 0.5가 포함되지 않고 있다.</p>
<pre class="output"><code>    Exact binomial test

data:  prefs
number of successes = 21, number of trials = 30, p-value = 0.04277
alternative hypothesis: true probability of success is not equal to 0.5
95 percent confidence interval:
 0.5060410 0.8526548
sample estimates:
probability of success 
                   0.7 </code></pre>
<h4 id="단일-표본-비율검정-웹사이트-abc-선호도-분석">1.2. 단일 표본 비율검정 – 웹사이트 A,B,C 선호도 분석</h4>
<p>웹사이트가 A,B 두가지 아니고 3개 이상인 경우 A,B,C 웹사이트 간에 선호도 차이가 있는지 검정한다.</p>
<pre class="{r}"><code>##==============================================================================
## 01. 데이터 가져오기
##==============================================================================
library(haven)
spss.dat &lt;- file.choose() # prefs3.sav
pref.df &lt;- read_spss(spss.dat)

head(pref.df)</code></pre>
<pre class="output"><code>Source: local data frame [6 x 2]

  Subject Preference
    (dbl)     (lbll)
1       1          3
2       2          3
3       3          3
4       4          1
5       5          1
6       6          3</code></pre>
<p>웹선호도에 대한 코딩이 <code>1</code>, <code>2</code>, <code>3</code>으로 되어 있다. 이를 <code>A</code>, <code>B</code>, <code>C</code>로 코딩을 바꾼다.</p>
<pre class="{r}"><code>##==============================================================================
## 02. 데이터 전처리 및 정제
##==============================================================================
library(dplyr)
library(plyr)

pref.df$Subject &lt;- sapply(pref.df$Subject, as.factor)
pref.df$Preference &lt;- sapply(pref.df$Preference, as.factor)

pref.df &lt;- pref.df %&gt;% mutate(Preference = revalue(Preference, c(&#39;1&#39;=&#39;A&#39;, &#39;2&#39;=&#39;B&#39;, &#39;3&#39;=&#39;C&#39;)))</code></pre>
<pre class="{r}"><code>##==============================================================================
## 03. 실험설계 통계분석
##==============================================================================
# 3.1. 기초 통계 및 시각화
summary(pref.df)
plot(pref.df$Preference)</code></pre>
<pre class="output"><code>    Subject   Preference
 1      : 1   C:13      
 2      : 1   A:13      
 3      : 1   B: 4      
 4      : 1             
 5      : 1             
 6      : 1             
 (Other):24   </code></pre>
<pre class="{r}"><code>#-------------------------------------------------------------------------------
# 3.2 실험설계 단일표본 비율검정: One-Sample Proportion Test
#-------------------------------------------------------------------------------
# 근사 카이스퀘어 검정
prefs &lt;- xtabs( ~ Preference, data=pref.df)
prefs
chisq.test(prefs)</code></pre>
<p><span class="math inline">\(p-\)</span>값 0.05를 기준으로 본다면, 웹사이트 A, B, C 선호도에 유의성이 없다는 결론에 도달할 수 있지만, 0.05에 가깝기 때문에 유보한다.</p>
<pre class="output"><code>    Chi-squared test for given probabilities

data:  prefs
X-squared = 5.4, df = 2, p-value = 0.06721</code></pre>
<p>다항분포 검정을 통한 정확 다항검정에서는 0.05에 더욱 가까운 <span class="math inline">\(p-\)</span> 값이 검출되었다.</p>
<pre class="{r}"><code># 다항분포 검정
library(XNomial)
xmulti(prefs, c(1/3, 1/3, 1/3), statName = &quot;Prob&quot;)</code></pre>
<pre class="output"><code>P value (Prob) = 0.05117</code></pre>
<p>다중비교는 세가지 웹사이트 간에 차이가 있다는 것은 이해가 되나 어느 것에서 차이가 나는지 검출할 때 사용한다.</p>
<pre class="{r}"><code># 다중 비교
aa &lt;- binom.test(sum(pref.df$Preference==&#39;A&#39;), nrow(pref.df), p=1/3)
bb &lt;- binom.test(sum(pref.df$Preference==&#39;B&#39;), nrow(pref.df), p=1/3)
cc &lt;- binom.test(sum(pref.df$Preference==&#39;C&#39;), nrow(pref.df), p=1/3)
p.adjust(c(aa$p.value, bb$p.value, cc$p.value), method=&quot;holm&quot;)</code></pre>
<p>웹사이트 A, C 선호도에는 차이가 없지만, B에는 유의성이 있는 것으로 보인다.</p>
<pre class="output"><code>[1] 0.4996989 0.0583577 0.4996989</code></pre>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
