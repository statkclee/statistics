<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: 데이터 과학 – 기초 통계</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">데이터 과학 – 기초 통계</h1></a>
          <h2 class="subtitle">실험 유형 구분</h2>
          <h1 id="실험과-관찰-coursera-doe">실험과 관찰 <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></h1>
<p>김재광 교수님께서 실험 데이터와 관찰 데이터에 대한 차이를 페이스북 담벼락에 사례와 함께 잘 정리해 주셨습니다.</p>
<p>실험 데이터와 관찰 데이터를 구분하는 것은 통계학에서는 가장 기본적인 내용입니다. 실험은 분석보다는 설계가 어렵고 관찰은 분석이 어렵습니다. 관찰에서 분석이 어려운 이유는 <strong>중첩요인(confounding factor)</strong>이 존재하기 때문입니다. (예를 들어 커피를 마시는 사람들이 암발병률이 높은데 이는 커피 때문이 아니라 커피를 마시는 사람들이 담배를 피우는 경향이 높기 때문입니다. 따라서 담배 피는지 여부를 포함해서 분석해야 올바른 결론이 나옵니다.) 즉, 중첩요인(Confounding factor)을 모형에 포함시켜서 보정해주어야 인과관계에 대해 보다 정확한 결론을 얻을수 있는데, 문제는 현실적으로 중첩요인을 모두 관측하지 못한다는 것입니다. 따라서, 중요한 중첩요인을 빼놓고 분석을 하면 잘못된 결론을 얻습니다. 그래서 과학은 진리라기 보다는 해석에 가깝다고 이야기 할수 있을 것입니다. 데이터를 바탕으로하고 주관을 최대한 배제한 해석인 것입니다.</p>
<p>&lt;iframe src=“https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2Fjaekwang.kim.125%2Fposts%2F1856505211031977&amp;width=500” width=“500” height=“382” style=“border:none;overflow:hidden” scrolling=“no” frameborder=“0” allowTransparency=“true”&gt;</iframe></p>
<ol style="list-style-type: decimal">
<li>의학적 지식은 종종 업데이트 된다. 술이 몸에 나쁘다고 했다가 한두잔은 괜찮다고 했다가 또 그것 틀렸다고 했다가 자꾸 바뀐다. 또 물도 많이 먹는게 좋다고 했다가 아니라고 했다가 자꾸 헷갈리게 한다. 왜 그럴까?</li>
<li>두가지 이유를 생각해 볼수 있는데 하나는 관찰연구의 한계이다. 인간을 대상으로는 통제된 실험을 하기 어렵다. (인권 문제 등등 때문에.) 따라서 많은 결론들이 실험이 아닌 관찰 연구 (observational study)를 통해서 얻어지기 때문에 관찰 연구의 한계가 적용된다. 관찰 연구로는 원칙적으로 인과 관계를 규명하는 것이 불가능하다. (그때문에 논문이 자꾸 나올수 있는지도 모르겠다.)</li>
<li>다른 또 하나의 이유는 인간의 생물학적 다양성 때문이다. 인간으로부터 얻어지는 자료는 물리적 자료와는 근본적인 차이가 있는데 그건 같은 인간 종족 내에서도 엄청난 다양성이 있다는 것이다. 기계에서 얻어지는 물리적 자료는 기본적으로 동질적이다. (이는 물리학이나 공대에서 통계학을 우습게 보는것과도 연결되어 있다. physical 한 물질을 대상으로 하는 자료는 샘플링이 필요없다. 자료가 어차피 동질적이므로. ) 하지만 생물학 자료는 그렇지 않다. 똑같은 부모 밑에서도 엄청 다른 자녀가 탄생한다.</li>
<li>따라서 인간을 대상으로 관찰을 하고 이를 통해 일반화를 하는 모든 지식은 어느 정도 한계가 있다는 것을 감안해서 받아 들어야한다. 측정기술이 발달하면 예전에 맞는 것으로 믿어졌던 이론이 틀린 것으로 밝혀진다. 절대적인 지식이 아니라는 것이다. 뇌과학 이런것도 마찬가지.</li>
</ol>
<h2 id="비율-검정">비율 검정</h2>
<table>
<thead>
<tr class="header">
<th align="left">표본</th>
<th align="left">반응 범주</th>
<th align="left">검정</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">2</td>
<td align="left">단일 표본 <span class="math inline">\(\chi^2\)</span> 검정, 이항 검정(Binomial Test)</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">2 이상</td>
<td align="left">단일 표본 <span class="math inline">\(\chi^2\)</span> 검정, 다항 검정(multinomial Test)</td>
</tr>
<tr class="odd">
<td align="left">1이상</td>
<td align="left">2 이상</td>
<td align="left"><span class="math inline">\(N\)</span> 표본 <span class="math inline">\(\chi^2\)</span> 검정, G-검정, 피셔의 정확검정</td>
</tr>
</tbody>
</table>
<h2 id="분산-분석과-일반화-선형모형">분산 분석과 일반화 선형모형</h2>
<table>
<colgroup>
<col width="8%" />
<col width="10%" />
<col width="12%" />
<col width="28%" />
<col width="40%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">요인</th>
<th align="left">수준</th>
<th align="left">군간(B)/군내(W)</th>
<th align="left">모수 검정</th>
<th align="left">비모수 검정</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">2</td>
<td align="left">군간(B)</td>
<td align="left">독립표본 <span class="math inline">\(t-\)</span>검정</td>
<td align="left">만-위트니 <span class="math inline">\(U\)</span> 검정(Mann-Whitney)</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">2 이상</td>
<td align="left">군간(B)</td>
<td align="left">일원 분산분석</td>
<td align="left">크루스칼-왈리스 검정(Kruskal-Wallis)</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">2</td>
<td align="left">군간(W)</td>
<td align="left">쌍체 <span class="math inline">\(t-\)</span> 검정</td>
<td align="left">윌콕슨 부호순위 검정(Wilcoxon signed-rank test)</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">2 이상</td>
<td align="left">군간(W)</td>
<td align="left">일원 반복측정 분산분석</td>
<td align="left">프리드만의 검정 (Friedman test)</td>
</tr>
<tr class="odd">
<td align="left">1이상</td>
<td align="left">2 이상</td>
<td align="left">군간(B)</td>
<td align="left">요인 분산분석, 선형모형</td>
<td align="left">Aligned Rank Transform(ART), 일반화선형모형(GLM)</td>
</tr>
<tr class="even">
<td align="left">1이상</td>
<td align="left">2 이상</td>
<td align="left">군간(W)</td>
<td align="left">요인 반복측정 분산분석, 선형혼합모형</td>
<td align="left">Aligned Rank Transform(ART), 일반화선형혼합모형(GLMM)</td>
</tr>
</tbody>
</table>
<h1 id="비율-검정-1">비율 검정</h1>
<h2 id="사용자-선호도user-preference">사용자 선호도(User Preference)</h2>
<ul>
<li>단일 표본 비율 검정(One-Sample Test of Proportions)</li>
<li>단일표본 비율검정 (More One-Sample Tests of Proportions)</li>
<li>이표본 비율검정(Two-Sample Tests of Proportions)</li>
</ul>
<h2 id="ab-테스트-t-검정">A/B 테스트 – <span class="math inline">\(t-\)</span>검정</h2>
<ul>
<li><span class="math inline">\(t-\)</span>검정</li>
</ul>
<h2 id="작업-완수-시간-분산분석">작업 완수 시간 – 분산분석</h2>
<ul>
<li>일원 분산분석 (One-way Analysis of Variance)
<ul>
<li>군간(Between) 요인 분석</li>
</ul></li>
</ul>
<h2 id="사용자-검색-반복-측정">사용자 검색 – 반복 측정</h2>
<ul>
<li>반복측정 분산분석(Repeated Measures ANOVA)
<ul>
<li>군내(Within) 요인 분석</li>
</ul></li>
</ul>
<h2 id="핸드폰-자판-입력-요인-실험-설계">핸드폰 자판 입력 – 요인 실험 설계</h2>
<ul>
<li>요인 실험 설계 (Factorial Design of Experiment)
<ul>
<li>한가지 이상 요인에 대한 실험 설계</li>
</ul></li>
</ul>
<h2 id="일반화-선형-혼합-모형">일반화 선형 (혼합) 모형</h2>
<ul>
<li>일반화 선형 모형(Generalized Linear Models, GLM)</li>
<li>일반화 선형 혼합 모형(Generalized Linear Mixed Models, GLMM)</li>
</ul>
<h1 id="doe-key-component">실험의 핵심 구성요소</h1>
<p>실험(Experiment)의 3대 구성요소에는 임의화(Randomization), 반복(Replication), 블록화(Blocking)가 있다.</p>
<ul>
<li>임의화(Randomization): 처리집단에 걸친 외부 효과를 차단하기 위해서 관심을 갖는 결과값의 변동성을 동일하게 배분한다.
<ul>
<li>이중 맹검 의학실험 (double blind trial)</li>
<li>신약 개발에서 환자나 의사나 어느 집단에 배정되는지 알지 못하게 함.</li>
<li>제3자가 배정되는 그룹을 지정</li>
</ul></li>
<li>반복(Replication): 변동성을 충분히 잴 수 있도록 실험을 반복해야 함.
<ul>
<li>환자 1명에게 신약효과를 추정하는 실험을 하다면, 해당 신약에 대한 일반화를 할 수 있는 방법은 없음.</li>
</ul></li>
<li>블록화(Blocking): 처리집단을 유사하게 함으로써 변동성을 제어하는데 도움이 됨.
<ul>
<li>그룹내에는 차이가 적어야 하고, 그룹간에는 차이가 커야한다.</li>
<li>성별이나 연령대를 기준으로 블록</li>
</ul></li>
</ul>
<h1 id="doe-power-sample-size">검정력과 표본 크기 <a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></h1>
<p>검정력과 효과크기, 표본크기는 실험 계량화를 위해 필수적으로 동원되는 기초개념이다.</p>
<ul>
<li>검정력(power): 대립가설이 사실일 때 귀무가설을 올바르게 기각할 확률</li>
<li>효과크기(effect size): 탐지하고자 하는 차이에 대한 표준측도.</li>
<li>표본크기: 지정한 검정력으로 지정한 차이를 탐지하고자 할 때 필요한 실험횟수.</li>
</ul>
<p>이를 위해서 <code>pwr</code> 팩키지를 사용한다. 사용법이 다른 팩키지와 다른데 일반적으로 <code>pwr</code> 팩키지를 통해서 검정력, 효과크기, 표본크기를 계산하고자 다음 다양한 검정 함수에 매개변수로 해당 매개변수를 빼고 넘기게 된다. 예를 들어, 검정력(power)을 계산하고자 하면 <code>power</code> 매개변수를 빼고 나머지 매개변수를 채워 넣으면 겸정력이 계산되어 나온다. 산출하고자 검정력, 효과크기, 표본크기를 고르고 나서 수행하고자 하는 검정에 대한 함수를 선정하는 과정을 거친다.</p>
<ul>
<li><code>pwr.p.test</code>: 일표본 비율검정(one-sample proportion test)</li>
<li><code>pwr.2p.test</code>: 이표본 비율검정(two-sample proportion test)</li>
<li><code>pwr.2p2n.test</code>: (표본크기 다른) 이표본 비율검정(two-sample proportion test (unequal sample sizes))</li>
<li><code>pwr.t.test</code>: t-검정(two-sample, one-sample and paired t-tests)</li>
<li><code>pwr.t2n.test</code>: (표보크기 다른 t-검정(two-sample t-tests (unequal sample sizes))</li>
<li><code>pwr.anova.test</code>: 일원배치 분산분석(one-way balanced ANOVA)</li>
<li><code>pwr.r.test</code>: 상관검정(correlation test)</li>
<li><code>pwr.chisq.test</code>: 카이검정(chi-squared test (goodness of fit and association))</li>
<li><code>pwr.f2.test</code>: 일반화 선형모형 검정(test for the general linear model)</li>
</ul>
<p>각 검증별 일반적인 효과크기 산출표</p>
<table>
<thead>
<tr class="header">
<th align="left">Test</th>
<th align="left"><code>small</code></th>
<th align="left"><code>medium</code></th>
<th align="left"><code>large</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">tests for proportions (<code>p</code>)</td>
<td align="left">0.2</td>
<td align="left">0.5</td>
<td align="left">0.8</td>
</tr>
<tr class="even">
<td align="left">tests for means (<code>t</code>)</td>
<td align="left">0.2</td>
<td align="left">0.5</td>
<td align="left">0.8</td>
</tr>
<tr class="odd">
<td align="left">chi-square tests (<code>chisq</code>)</td>
<td align="left">0.1</td>
<td align="left">0.3</td>
<td align="left">0.5</td>
</tr>
<tr class="even">
<td align="left">correlation test (<code>r</code>)</td>
<td align="left">0.1</td>
<td align="left">0.3</td>
<td align="left">0.5</td>
</tr>
<tr class="odd">
<td align="left">anova (<code>anov</code>)</td>
<td align="left">0.1</td>
<td align="left">0.25</td>
<td align="left">0.4</td>
</tr>
<tr class="even">
<td align="left">general linear model (<code>f2</code>)</td>
<td align="left">0.02</td>
<td align="left">0.15</td>
<td align="left">0.35</td>
</tr>
</tbody>
</table>
<h2 id="doe-power-coin">동전 던지기 비율검정</h2>
<p>공정한 동전이라면 앞면이 나올 확률이 0.5 즉, <span class="math inline">\(p=0.5\)</span>가 된다. 그런데 대립가설로 0.75가 나오는 동전을 검정력 0.8로 잡고 귀무가설을 기각하는데 동전을 얼마나 던져야 할까? 일표본 비율검정 <code>pwr.p.test()</code> 함수로 잡고, 귀무가설과 대립가설을 각각 설정하고 <span class="math inline">\(\alpha=0.05\)</span>, 검정력 <code>power = 0.8</code>, 대립가설은 <code>alternative = &quot;greater&quot;</code>으로 지정하면 빠진 표본크기가 산출된다. <code>plot</code> 함수를 통해 표본크기와 검정력에 대한 시각화도 가능하다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(pwr)</code></pre></div>
<pre class="output"><code>Error in library(pwr): there is no package called &#39;pwr&#39;
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">coin_pwr &lt;-<span class="st"> </span><span class="kw">pwr.p.test</span>(<span class="dt">h =</span> <span class="kw">ES.h</span>(<span class="dt">p1 =</span> <span class="fl">0.75</span>, <span class="dt">p2 =</span> <span class="fl">0.50</span>), 
           <span class="dt">sig.level =</span> <span class="fl">0.05</span>, 
           <span class="dt">power =</span> <span class="fl">0.80</span>, 
           <span class="dt">alternative =</span> <span class="st">&quot;greater&quot;</span>)</code></pre></div>
<pre class="output"><code>Error in pwr.p.test(h = ES.h(p1 = 0.75, p2 = 0.5), sig.level = 0.05, power = 0.8, : 함수 &quot;pwr.p.test&quot;를 찾을 수 없습니다
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">coin_pwr</code></pre></div>
<pre class="output"><code>Error in eval(expr, envir, enclos): 객체 &#39;coin_pwr&#39;를 찾을 수 없습니다
</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(coin_pwr) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;표본크기&quot;</span>, <span class="dt">y=</span> <span class="st">&quot;검정력&quot;</span>)</code></pre></div>
<pre class="output"><code>Error in plot(coin_pwr): 객체 &#39;coin_pwr&#39;를 찾을 수 없습니다
</code></pre>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://www.coursera.org/learn/designexperiments">Designing, Running, and Analyzing Experiments</a><a href="#fnref1">↩</a></p></li>
<li id="fn2"><p><a href="https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html">Clay Ford(2018-03-03), Getting started with the pwr package</a><a href="#fnref2">↩</a></p></li>
</ol>
</div>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
